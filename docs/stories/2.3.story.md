# Story 2.3: λ…ΈνΈ μƒμ„Έ μ΅°ν λ° μλ™ μ €μ¥ κΈ°λ¥

## π“‹ **Story κ°μ”**
**As a** λ΅κ·ΈμΈν• μ‚¬μ©μ  
**I want to** λ…ΈνΈλ¥Ό μƒμ„Έν•κ² μ΅°νν•κ³  μμ • μ¤‘ μλ™ μ €μ¥ κΈ°λ¥μ„ μ‚¬μ©ν•  μ μλ‹¤  
**So that** λ…ΈνΈ λ‚΄μ©μ„ νΈλ¦¬ν•κ² ν™•μΈν•κ³  μ‘μ—… μ¤‘ λ°μ΄ν„° μ†μ‹¤ μ—†μ΄ μ•μ „ν•κ² νΈμ§‘ν•  μ μλ‹¤  

## π― **μμ© κΈ°μ¤€ (Acceptance Criteria)**

### AC 2.3.1: λ…ΈνΈ μƒμ„Έ μ΅°ν κΈ°λ¥
- [ ] λ…ΈνΈ λ©λ΅μ—μ„ λ…ΈνΈ μ λ© ν΄λ¦­ μ‹ μƒμ„Έ λ³΄κΈ° νμ΄μ§€λ΅ μ΄λ™ν•λ‹¤
- [ ] μƒμ„Έ νμ΄μ§€μ—μ„ λ…ΈνΈμ μ „μ²΄ λ‚΄μ©μ„ λ³Ό μ μλ‹¤
- [ ] λ…ΈνΈ μ λ©, λ³Έλ¬Έ, μƒμ„±μΌ, μμ •μΌμ΄ ν‘μ‹λλ‹¤
- [ ] μ½κΈ° μ „μ© λ¨λ“μ™€ νΈμ§‘ λ¨λ“λ¥Ό μ „ν™ν•  μ μλ‹¤
- [ ] νΈμ§‘ λ¨λ“μ—μ„λ” μ λ©κ³Ό λ³Έλ¬Έμ„ μμ •ν•  μ μλ‹¤
- [ ] λ‹¤λ¥Έ μ‚¬μ©μμ λ…ΈνΈλ” μ΅°νν•  μ μ—†λ‹¤ (404 μ²λ¦¬)

### AC 2.3.2: μλ™ μ €μ¥ κΈ°λ¥
- [ ] νΈμ§‘ λ¨λ“μ—μ„ 3μ΄κ°„ μ…λ ¥μ΄ μ—†μΌλ©΄ μλ™μΌλ΅ μ €μ¥λλ‹¤
- [ ] μλ™ μ €μ¥ μƒνƒκ°€ UIμ— ν‘μ‹λλ‹¤ ("μ €μ¥λ¨", "μ €μ¥ μ¤‘...", "μ €μ¥ μ‹¤ν¨")
- [ ] νμ΄μ§€λ¥Ό λ²—μ–΄λ‚κΈ° μ „ μ €μ¥λμ§€ μ•μ€ λ³€κ²½μ‚¬ν•­μ΄ μμΌλ©΄ κ²½κ³ ν•λ‹¤
- [ ] μλ™ μ €μ¥μ€ μ‹¤μ  λ³€κ²½μ‚¬ν•­μ΄ μμ„ λ•λ§ μ‹¤ν–‰λλ‹¤
- [ ] λ„¤νΈμ›ν¬ μ¤λ¥ μ‹ μ¬μ‹λ„ λ΅μ§μ΄ μ‘λ™ν•λ‹¤

### AC 2.3.3: νΈμ§‘ λ¨λ“ UX
- [ ] μ½κΈ° λ¨λ“μ—μ„ "νΈμ§‘" λ²„νΌμΌλ΅ νΈμ§‘ λ¨λ“ μ „ν™
- [ ] νΈμ§‘ λ¨λ“μ—μ„ "μ™„λ£" λ²„νΌμΌλ΅ μ½κΈ° λ¨λ“ μ „ν™
- [ ] νΈμ§‘ λ¨λ“μ—μ„λ„ Ctrl+S μλ™ μ €μ¥ μ§€μ›
- [ ] νΈμ§‘ μ¤‘μΈ ν•„λ“κ°€ μ‹κ°μ μΌλ΅ κµ¬λ¶„λλ‹¤
- [ ] λ¨λ°”μΌμ—μ„λ„ νΈλ¦¬ν• νΈμ§‘ κ²½ν— μ κ³µ

### AC 2.3.4: λ„¤λΉ„κ²μ΄μ… λ° μ ‘κ·Όμ„±
- [ ] λΈλ λ“ν¬λΌ λ„¤λΉ„κ²μ΄μ… μ κ³µ (ν™ > λ…ΈνΈ λ©λ΅ > λ…ΈνΈ μ λ©)
- [ ] λ’¤λ΅ κ°€κΈ° λ²„νΌμΌλ΅ λ…ΈνΈ λ©λ΅μΌλ΅ μ΄λ™
- [ ] ν‚¤λ³΄λ“ λ„¤λΉ„κ²μ΄μ… μ§€μ›
- [ ] μ¤ν¬λ¦° λ¦¬λ” νΈν™μ„± ν™•λ³΄

### AC 2.3.5: μ„±λ¥ λ° μµμ ν™”
- [ ] λ…ΈνΈ λ‚΄μ©μ΄ κΈΈμ–΄λ„ λΉ λ¥Έ λ΅λ”© μ†λ„ μ μ§€
- [ ] μλ™ μ €μ¥μΌλ΅ μΈν• UI λκΉ€ ν„μƒ μ—†μ
- [ ] λ™μ‹ νΈμ§‘ μ¶©λ λ°©μ§€ (optimistic updates)

## π—οΈ **κΈ°μ μ  κµ¬ν„ μ‚¬ν•­**

### 1. λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ (κΈ°μ΅΄ μ μ§€)
```sql
-- κΈ°μ΅΄ notes ν…μ΄λΈ” μ‚¬μ© (λ³€κ²½ μ—†μ)
-- updated_at ν•„λ“λ” μλ™ μ €μ¥ μ‹λ§λ‹¤ κ°±μ‹ 
```

### 2. API μ—”λ“ν¬μΈνΈ (Server Actions)
```typescript
// lib/actions/notes.tsμ— μ¶”κ°€
export async function getNoteById(noteId: string)  // κΈ°μ΅΄ ν•¨μ ν™μ©
export async function updateNotePartial(noteId: string, data: { title?: string; content?: string })
export async function saveNoteDraft(noteId: string, data: { title?: string; content?: string })
```

### 3. μλ™ μ €μ¥ λ΅μ§
```typescript
// hooks/use-auto-save.ts
export function useAutoSave(
  noteId: string,
  data: { title: string; content: string },
  options: {
    delay?: number  // κΈ°λ³Έ 3μ΄
    enabled?: boolean
    onSave?: (result: any) => void
    onError?: (error: any) => void
  }
)
```

### 4. νμ΄μ§€ κµ¬μ΅°
```
app/
β”β”€β”€ notes/
β”‚   β”β”€β”€ [id]/
β”‚   β”‚   β”β”€β”€ page.tsx              # λ…ΈνΈ μƒμ„Έ λ³΄κΈ°/νΈμ§‘ νμ΄μ§€
β”‚   β”‚   β”β”€β”€ edit/
β”‚   β”‚   β”‚   β””β”€β”€ page.tsx          # κΈ°μ΅΄ νΈμ§‘ μ „μ© νμ΄μ§€ (λ¦¬λ‹¤μ΄λ ‰νΈ)
β”‚   β”‚   β””β”€β”€ not-found.tsx         # 404 νμ΄μ§€
β”‚   β”β”€β”€ page.tsx                  # λ…ΈνΈ λ©λ΅
β”‚   β””β”€β”€ new/
β”‚       β””β”€β”€ page.tsx              # μƒ λ…ΈνΈ μ‘μ„±
```

### 5. μ»΄ν¬λ„νΈ κµ¬μ΅°
```
components/
β”β”€β”€ notes/
β”‚   β”β”€β”€ note-detail-view.tsx     # μ½κΈ° λ¨λ“ μ»΄ν¬λ„νΈ
β”‚   β”β”€β”€ note-edit-view.tsx       # νΈμ§‘ λ¨λ“ μ»΄ν¬λ„νΈ
β”‚   β”β”€β”€ note-auto-save-status.tsx # μλ™ μ €μ¥ μƒνƒ ν‘μ‹
β”‚   β”β”€β”€ note-breadcrumb.tsx      # λΈλ λ“ν¬λΌ λ„¤λΉ„κ²μ΄μ…
β”‚   β””β”€β”€ note-view-toggle.tsx     # μ½κΈ°/νΈμ§‘ λ¨λ“ ν† κΈ€
β”β”€β”€ ui/
β”‚   β”β”€β”€ breadcrumb.tsx           # λΈλ λ“ν¬λΌ UI μ»΄ν¬λ„νΈ
β”‚   β””β”€β”€ status-indicator.tsx     # μƒνƒ ν‘μ‹ μ»΄ν¬λ„νΈ
β””β”€β”€ hooks/
    β”β”€β”€ use-auto-save.ts         # μλ™ μ €μ¥ ν›…
    β”β”€β”€ use-unsaved-changes.ts   # μ €μ¥λμ§€ μ•μ€ λ³€κ²½μ‚¬ν•­ κ°μ§€
    β””β”€β”€ use-debounce.ts          # λ””λ°”μ΄μ¤ ν›…
```

## π“ **κµ¬ν„ μ‘μ—… λ©λ΅**

### Phase 1: λ°±μ—”λ“ λ΅μ§
- [ ] `lib/actions/notes.ts`μ— `updateNotePartial` ν•¨μ κµ¬ν„
- [ ] `lib/actions/notes.ts`μ— `saveNoteDraft` ν•¨μ κµ¬ν„ (μλ™ μ €μ¥μ©)
- [ ] λ¶€λ¶„ μ—…λ°μ΄νΈ λ° μ¶©λ κ°μ§€ λ΅μ§ κµ¬ν„
- [ ] μ—λ¬ μ²λ¦¬ λ° μ¬μ‹λ„ λ΅μ§ κµ¬ν„

### Phase 2: μ»¤μ¤ν…€ ν›… κµ¬ν„
- [ ] `hooks/use-debounce.ts` λ””λ°”μ΄μ¤ ν›… κµ¬ν„
- [ ] `hooks/use-auto-save.ts` μλ™ μ €μ¥ ν›… κµ¬ν„
- [ ] `hooks/use-unsaved-changes.ts` λ³€κ²½μ‚¬ν•­ κ°μ§€ ν›… κµ¬ν„
- [ ] λΈλΌμ°μ € μ΄λ²¤νΈ (beforeunload) μ²λ¦¬

### Phase 3: UI μ»΄ν¬λ„νΈ κµ¬ν„
- [ ] `components/ui/breadcrumb.tsx` λΈλ λ“ν¬λΌ μ»΄ν¬λ„νΈ κµ¬ν„
- [ ] `components/ui/status-indicator.tsx` μƒνƒ ν‘μ‹ μ»΄ν¬λ„νΈ κµ¬ν„
- [ ] `components/notes/note-detail-view.tsx` μ½κΈ° λ¨λ“ κµ¬ν„
- [ ] `components/notes/note-edit-view.tsx` νΈμ§‘ λ¨λ“ κµ¬ν„
- [ ] `components/notes/note-auto-save-status.tsx` μ €μ¥ μƒνƒ ν‘μ‹ κµ¬ν„
- [ ] `components/notes/note-breadcrumb.tsx` λ…ΈνΈμ© λΈλ λ“ν¬λΌ κµ¬ν„

### Phase 4: νμ΄μ§€ κµ¬ν„
- [ ] `app/notes/[id]/page.tsx` μƒμ„Έ νμ΄μ§€ κµ¬ν„
- [ ] μ½κΈ°/νΈμ§‘ λ¨λ“ μ „ν™ λ΅μ§ κµ¬ν„
- [ ] URL μƒνƒ κ΄€λ¦¬ (`?mode=edit`) κµ¬ν„
- [ ] κΈ°μ΅΄ νΈμ§‘ νμ΄μ§€ λ¦¬λ‹¤μ΄λ ‰νΈ μ²λ¦¬

### Phase 5: ν†µν•© λ° μµμ ν™”
- [ ] λ…ΈνΈ λ©λ΅μ—μ„ μƒμ„Έ νμ΄μ§€λ΅ λ§ν¬ μ—°κ²°
- [ ] μ„±λ¥ μµμ ν™” (λ©”λ¨μ΄μ μ΄μ…, λ¶ν•„μ”ν• λ¦¬λ λ”λ§ λ°©μ§€)
- [ ] μ ‘κ·Όμ„± κ°μ„  (ARIA λ μ΄λΈ”, ν‚¤λ³΄λ“ λ„¤λΉ„κ²μ΄μ…)
- [ ] λ¨λ°”μΌ λ°μ‘ν• μµμ ν™”

### Phase 6: ν…μ¤νΈ λ° κ²€μ¦
- [ ] μλ™ μ €μ¥ κΈ°λ¥ λ‹¨μ„ ν…μ¤νΈ μ‘μ„±
- [ ] μƒμ„Έ μ΅°ν κΈ°λ¥ ν…μ¤νΈ μ‘μ„±
- [ ] νΈμ§‘ λ¨λ“ μ „ν™ ν…μ¤νΈ μ‘μ„±
- [ ] E2E ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ μ‘μ„± λ° μ‹¤ν–‰

## π”— **μμ΅΄μ„±**
- **μ„ ν–‰ μ΅°κ±΄**: Story 2.2 (λ…ΈνΈ μμ •/μ‚­μ , νμ΄μ§€λ„¤μ΄μ…) μ™„λ£
- **κ΄€λ ¨ Epic**: Epic 2 - λ…ΈνΈ κ΄€λ¦¬
- **λ‹¤μ Story**: Story 2.4 (λ…ΈνΈ κ²€μƒ‰ λ° ν•„ν„°λ§) λλ” Story 3.1 (μμ„± λ©”λ¨ λ…Ήμ)

## π“ **μ„±κ³µ μ§€ν‘**
- [ ] μ‚¬μ©μκ°€ λ…ΈνΈλ¥Ό ν΄λ¦­ν•μ—¬ μƒμ„Έ λ‚΄μ©μ„ λ³Ό μ μλ‹¤
- [ ] νΈμ§‘ λ¨λ“μ—μ„ 3μ΄ ν›„ μλ™ μ €μ¥μ΄ μ‘λ™ν•λ‹¤
- [ ] μ €μ¥λμ§€ μ•μ€ λ³€κ²½μ‚¬ν•­μ΄ μμ„ λ• νμ΄μ§€ μ΄νƒ κ²½κ³ κ°€ ν‘μ‹λλ‹¤
- [ ] λ¨λ“  κΈ°λ¥μ΄ λ¨λ°”μΌμ—μ„λ„ μ •μƒ μ‘λ™ν•λ‹¤
- [ ] λ„¤νΈμ›ν¬ μ¤λ¥ μ‹ μ¬μ‹λ„ λ΅μ§μ΄ μ •μƒ μ‘λ™ν•λ‹¤

## π¨ **UI/UX κ³ λ ¤μ‚¬ν•­**
- **μ½κΈ° λ¨λ“**: κΉ”λ”ν•κ³  μ½κΈ° νΈν• νƒ€μ΄ν¬κ·Έλν”Ό
- **νΈμ§‘ λ¨λ“**: λ…ν™•ν• μ‹κ°μ  κµ¬λ¶„ (ν…λ‘λ¦¬, λ°°κ²½μƒ‰ λ“±)
- **μλ™ μ €μ¥ μƒνƒ**: λμ— λ„μ§€ μ•μ§€λ§ ν™•μΈ κ°€λ¥ν• μ„μΉμ— ν‘μ‹
- **λΈλ λ“ν¬λΌ**: ν„μ¬ μ„μΉλ¥Ό λ…ν™•ν ν‘μ‹
- **λ¨λ“ μ „ν™**: μ§κ΄€μ μΈ λ²„νΌ μ„μΉμ™€ μ•„μ΄μ½

## π“± **λ°μ‘ν• κ³ λ ¤μ‚¬ν•­**
- λ¨λ°”μΌμ—μ„ νΈμ§‘ λ¨λ“ μ‹ ν‚¤λ³΄λ“κ°€ μ¬λΌμ™€λ„ UI κΉ¨μ§ μ—†μ
- ν„°μΉ λ””λ°”μ΄μ¤μ—μ„ νΈλ¦¬ν• νΈμ§‘ κ²½ν—
- λΈλ λ“ν¬λΌμ΄ μ‘μ€ ν™”λ©΄μ—μ„λ„ μ μ ν ν‘μ‹λ¨

## π”’ **λ³΄μ• κ³ λ ¤μ‚¬ν•­**
- μ„λ²„ μ‚¬μ΄λ“μ—μ„ λ…ΈνΈ μ†μ κ¶ κ²€μ¦
- μλ™ μ €μ¥ μ‹μ—λ„ κ¶ν• κ²€μ¦ ν•„μ
- XSS λ°©μ§€λ¥Ό μ„ν• μ…λ ¥κ°’ sanitization
- CSRF ν† ν° κ²€μ¦

## β΅ **μ„±λ¥ κ³ λ ¤μ‚¬ν•­**
- μλ™ μ €μ¥ μ”μ²­ μµμ ν™” (λ³€κ²½μ‚¬ν•­μ΄ μμ„ λ•λ§)
- λ””λ°”μ΄μ‹±μΌλ΅ λ¶ν•„μ”ν• API νΈμ¶ λ°©μ§€
- λ‚™κ΄€μ  μ—…λ°μ΄νΈλ΅ λΉ λ¥Έ μ‚¬μ©μ κ²½ν—
- ν° λ…ΈνΈ λ‚΄μ©μ— λ€ν• κ°€μƒν™” κ³ λ ¤

---

**μ¶”μ • κ°λ° μ‹κ°„**: 3-4μΌ  
**μ°μ„ μμ„**: High  
**λ‚μ΄λ„**: Medium-High  
**Story Points**: 13

